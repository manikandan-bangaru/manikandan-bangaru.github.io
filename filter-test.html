<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .category-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }
        
        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #ddd;
            background: white;
            color: #666;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .filter-btn:hover,
        .filter-btn.active {
            background: #6366f1;
            color: white;
            border-color: #6366f1;
            transform: translateY(-2px);
        }
        
        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .app-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            opacity: 1;
            transform: scale(1);
        }
        
        .app-card.hidden {
            display: none;
        }
        
        .app-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }
        
        .app-category {
            display: inline-block;
            background: #6366f1;
            color: white;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }
        
        .app-description {
            color: #666;
            line-height: 1.5;
        }
        
        .debug-panel {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .debug-btn {
            background: #22c55e;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin-right: 10px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>App Filter Test Page</h1>
    
    <div class="debug-panel">
        <strong>Debug Panel:</strong>
        <div id="debug-info">Loading...</div>
        <button class="debug-btn" onclick="debugFilters()">Debug Filters</button>
        <button class="debug-btn" onclick="manualFilter('puzzle')">Test Puzzle Filter</button>
        <button class="debug-btn" onclick="manualFilter('all')">Show All</button>
    </div>
    
    <!-- App Categories Filter -->
    <div class="category-filter">
        <button class="filter-btn active" data-category="all">All Apps</button>
        <button class="filter-btn" data-category="puzzle">Puzzle Games</button>
        <button class="filter-btn" data-category="productivity">Productivity</button>
        <button class="filter-btn" data-category="health">Health & Fitness</button>
    </div>

    <div class="apps-grid">
        <!-- Classic 2048 Puzzle Game -->
        <div class="app-card" data-category="puzzle">
            <div class="app-category">Puzzle Game</div>
            <h3 class="app-title">Classic 2048 Puzzle Game</h3>
            <p class="app-description">
                Enjoy the classic 2048 puzzle game with a clean and simple design. Challenge your mind and reach the highest tile.
            </p>
        </div>

        <!-- Brain Puzzle App -->
        <div class="app-card" data-category="puzzle">
            <div class="app-category">Brain Training</div>
            <h3 class="app-title">Brain Puzzle Quest</h3>
            <p class="app-description">
                Enhance your problem-solving skills with challenging brain puzzles. Sharpen your mind through various cognitive challenges!
            </p>
        </div>

        <!-- Sliding Puzzle App -->
        <div class="app-card" data-category="puzzle">
            <div class="app-category">Puzzle Game</div>
            <h3 class="app-title">Sliding Puzzle Challenge</h3>
            <p class="app-description">
                Challenge yourself with the classic sliding puzzle game. Slide tiles to solve beautiful images and unlock new challenges!
            </p>
        </div>

        <!-- My Student App -->
        <div class="app-card" data-category="productivity">
            <div class="app-category">Education</div>
            <h3 class="app-title">My Student Organizer</h3>
            <p class="app-description">
                Complete student management solution for tracking activities, grades, attendance, and academic progress all in one place.
            </p>
        </div>

        <!-- My Fitness Assist -->
        <div class="app-card" data-category="health">
            <div class="app-category">Health & Fitness</div>
            <h3 class="app-title">Fitness Tracker Pro</h3>
            <p class="app-description">
                Your personal fitness companion for tracking health goals, monitoring progress, and maintaining a healthy lifestyle.
            </p>
        </div>

        <!-- Habit Tracker App -->
        <div class="app-card" data-category="productivity">
            <div class="app-category">Productivity</div>
            <h3 class="app-title">Habit Builder</h3>
            <p class="app-description">
                Build positive habits, break bad ones, and stay motivated with smart reminders and detailed progress analytics.
            </p>
        </div>
    </div>

    <script>
        console.log('üöÄ Filter Test Page Loaded');
        
        // Initialize filter functionality
        document.addEventListener('DOMContentLoaded', function() {
            initializeAppFilter();
            updateDebugInfo();
        });
        
        // App Category Filter System
        function initializeAppFilter() {
            console.log('üéØ Initializing App Filter System...');
            
            const filterContainer = document.querySelector('.category-filter');
            const appsGrid = document.querySelector('.apps-grid');
            
            if (!filterContainer || !appsGrid) {
                console.warn('‚ö†Ô∏è Filter container or apps grid not found');
                updateDebugInfo('ERROR: Filter container or apps grid not found');
                return;
            }
            
            const filterBtns = filterContainer.querySelectorAll('.filter-btn');
            const appCards = appsGrid.querySelectorAll('.app-card');
            
            console.log('‚úÖ Found:', filterBtns.length, 'filter buttons,', appCards.length, 'app cards');
            
            if (filterBtns.length === 0 || appCards.length === 0) {
                console.warn('‚ö†Ô∏è No filter buttons or app cards found');
                updateDebugInfo('ERROR: No filter buttons or app cards found');
                return;
            }
            
            // Log categories for debugging
            console.log('üìä Available categories:');
            filterBtns.forEach((btn, i) => {
                const category = btn.getAttribute('data-category');
                console.log(`  ${i + 1}. ${category} - "${btn.textContent.trim()}"`);
            });
            
            // Add click event listeners
            filterBtns.forEach((btn, index) => {
                btn.addEventListener('click', handleFilterClick, { passive: false });
                btn.setAttribute('data-filter-initialized', 'true');
                console.log(`üîó Added click listener to button ${index + 1}: ${btn.getAttribute('data-category')}`);
            });
            
            function handleFilterClick(e) {
                e.preventDefault();
                e.stopPropagation();
                
                const clickedBtn = e.currentTarget;
                const category = clickedBtn.getAttribute('data-category');
                
                console.log('üñ±Ô∏è Filter button clicked:', category);
                updateDebugInfo(`Filter clicked: ${category}`);
                
                // Update active states
                filterBtns.forEach(btn => {
                    btn.classList.remove('active');
                });
                
                clickedBtn.classList.add('active');
                
                // Filter and animate cards
                filterAppCards(category, appCards);
            }
            
            console.log('‚úÖ App filter initialization complete!');
            updateDebugInfo('Filter initialization complete');
        }

        // Filter cards function
        function filterAppCards(category, appCards) {
            console.log('üîÑ Filtering apps for category:', category);
            
            let visibleCount = 0;
            
            appCards.forEach((card, index) => {
                const cardCategory = card.getAttribute('data-category');
                const shouldShow = category === 'all' || cardCategory === category;
                
                if (shouldShow) {
                    showAppCard(card, index * 100);
                    visibleCount++;
                } else {
                    hideAppCard(card);
                }
            });
            
            console.log(`üëÅÔ∏è Showing ${visibleCount} of ${appCards.length} apps`);
            updateDebugInfo(`Showing ${visibleCount} of ${appCards.length} apps for category: ${category}`);
        }

        // Show card animation
        function showAppCard(card, delay = 0) {
            card.style.transition = 'none';
            card.style.display = 'block';
            card.classList.remove('hidden');
            card.style.opacity = '0';
            card.style.transform = 'translateY(30px) scale(0.95)';
            
            card.offsetHeight; // Force reflow
            
            setTimeout(() => {
                card.style.transition = 'all 0.5s cubic-bezier(0.4, 0, 0.2, 1)';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0) scale(1)';
            }, delay);
        }

        // Hide card animation
        function hideAppCard(card) {
            card.style.transition = 'all 0.3s cubic-bezier(0.4, 0, 0.6, 1)';
            card.style.opacity = '0';
            card.style.transform = 'translateY(-20px) scale(0.95)';
            
            setTimeout(() => {
                card.style.display = 'none';
                card.classList.add('hidden');
            }, 300);
        }

        // Manual filter for testing
        function manualFilter(category) {
            console.log('üîß Manual filter triggered:', category);
            
            const filterBtns = document.querySelectorAll('.filter-btn');
            const appCards = document.querySelectorAll('.app-card');
            
            // Update active button
            filterBtns.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-category') === category) {
                    btn.classList.add('active');
                }
            });
            
            // Filter cards
            filterAppCards(category, appCards);
        }

        // Debug function
        function debugFilters() {
            const filterBtns = document.querySelectorAll('.filter-btn');
            const appCards = document.querySelectorAll('.app-card');
            
            console.log('üîç === FILTER DEBUG ===');
            console.log('üìä Filter buttons found:', filterBtns.length);
            console.log('üì± App cards found:', appCards.length);
            
            let debugText = `Filter buttons: ${filterBtns.length}, App cards: ${appCards.length}\\n`;
            
            filterBtns.forEach((btn, i) => {
                const category = btn.getAttribute('data-category');
                const text = btn.textContent.trim();
                const hasListener = btn.hasAttribute('data-filter-initialized');
                const isActive = btn.classList.contains('active');
                debugText += `Button ${i + 1}: "${category}" - "${text}" - Initialized: ${hasListener} - Active: ${isActive}\\n`;
            });
            
            appCards.forEach((card, i) => {
                const category = card.getAttribute('data-category');
                const title = card.querySelector('.app-title')?.textContent || 'No title';
                const isVisible = card.style.display !== 'none' && !card.classList.contains('hidden');
                debugText += `Card ${i + 1}: "${category}" - "${title}" - Visible: ${isVisible}\\n`;
            });
            
            updateDebugInfo(debugText);
            console.log('üîç ===================');
        }

        // Update debug panel
        function updateDebugInfo(info) {
            const debugPanel = document.getElementById('debug-info');
            if (debugPanel) {
                debugPanel.innerHTML = info.replace(/\\n/g, '<br>');
            }
        }
    </script>
</body>
</html>
